{{!< default}}

{{#post}}
<div class="post-content">
  <article class="{{post_class}} {{#unless feature_image}}no-image{{/unless}}">

      <header>
          <h1 class="post-content-title">{{title}}</h1>
      </header>

      {{#if custom_excerpt}}
      <p class="post-content-excerpt">{{custom_excerpt}}</p>
      {{/if}}

      {{#if feature_image}}
      <figure class="post-hero-image">
          <img
            class="kg-image"
            srcset="{{img_url feature_image size="s"}} 300w,
            {{img_url feature_image size="m"}} 600w,
            {{img_url feature_image size="l"}} 1000w,
            {{img_url feature_image size="xl"}} 2000w"
            sizes="(max-width: 800px) 400px,
                    (max-width: 1170px) 700px,
                    1400px"
            src="{{img_url feature_image size="xl"}}"
            alt="{{title}}"
          />
      </figure>
      {{/if}}

      {{content}}

    <div class="post-endmark">
      <span class="dot"></span>
    </div>

    <!-- {{#get "posts" limit="3"}}
        <nav class="menu">
          <span class="menu-header">Here's some work</span>
          {{#foreach posts}}
            <a href="{{url}}" class="menu__link">{{title}}</a>
          {{/foreach}}
        </nav>
    {{/get}} -->

  </article>
</div>
{{/post}}

{{!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs --}}
{{#contentFor "scripts"}}
<script>
// Layout Script for Ghost Gallery Cards
var images = document.querySelectorAll('.kg-gallery-image img');
images.forEach(function (image) {
    var container = image.closest('.kg-gallery-image');
    var width = image.attributes.width.value;
    var height = image.attributes.height.value;
    var ratio = width / height;
    container.style.flex = ratio + ' 1 0%';
})
</script>
{{/contentFor}}
